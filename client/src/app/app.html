<div class="app-container">
  <div class="title-bar">
    <h1>{{ title() }}</h1>
  </div>

  <div class="search-bar-container">
    <app-search-bar (search)="onSearch($event)"></app-search-bar>
  </div>

  <div class="breeds-grid">
    @for (breed of showAllBreeds ? breeds : breeds.slice(0, 5); track breed.name) {
      <button
        mat-button
        (click)="filterByBreed(breed.name)"
        [class.selected]="selectedBreed === breed.name"
      >
        {{ breed.name }}
      </button>
    }

    @if (!showAllBreeds && breeds.length > 5) {
      <button mat-button (click)="showAllBreeds = true">Show more...</button>
    }
  </div>

  <div class="cat-grid">
    @for (cat of images; track cat.id) {
      <div class="cat-card">
        <img [src]="cat.url" [alt]="'Cat'" />
        <h3>{{ cat.breeds[0].name }}</h3>
        <p>{{ cat.breeds[0].temperament }}</p>

        <div class="vote-buttons">
          <button mat-icon-button color="primary" (click)="vote(cat.id, userId, 1)">
            <mat-icon>thumb_up</mat-icon>
          </button>

          <button mat-icon-button color="warn" (click)="vote(cat.id, userId, 0)">
            <mat-icon>thumb_down</mat-icon>
          </button>
        </div>
      </div>
    }
  </div>

  <div class="pagination-controls">
    <button
      mat-raised-button
      color="primary"
      class="pagination-btn"
      (click)="previousPage()"
      [disabled]="queryConfig.page <= 1 || images.length === 0"
    >
      Previous
    </button>
    <span class="pagination-page">Page {{ queryConfig.page }}</span>
    <button
      mat-raised-button
      color="primary"
      class="pagination-btn"
      (click)="nextPage()"
      [disabled]="images.length < queryConfig.limit || images.length === 0"
    >
      Next
    </button>
  </div>
</div>
